import{r as Y,c as f,a as A,o as l,b as d,d as s,e as C,F as I,f as Q,S as O,g as w,w as W,M as E,n as P,t as m,h as x,i as D,j as S,k as h,v as y,l as q,m as G,p as Z,q as X,s as J,u as ee,x as te,y as oe,z as se,A as L,B as ne,C as ie}from"./vendor.7c1dd81a.js";const re=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}};re();const a=Y({user:{},account:{},recipes:[],activeRecipe:{},ingredients:[],steps:[],favorites:[]});var b=(i,e)=>{for(const[o,t]of e)i[o]=t;return i};const ae={name:"App",setup(){return{appState:f(()=>a)}}},ce={class:"container-fluid"};function le(i,e,o,t,r,c){const n=A("Navbar"),v=A("router-view");return l(),d(I,null,[s("header",null,[C(n)]),s("main",null,[s("div",ce,[C(v)])])],64)}var de=b(ae,[["render",le]]);const N=window.location.origin.includes("localhost"),j=N?"https://localhost:5001":"",ue="dev-in-9pjrc.us.auth0.com",pe="https://patrickdev.com",_e="KCkMZ4ZIRzme4LvLXEQoEorQQItsONAx";function R(i,e){if(N)console[i](`[${i}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(i){case"log":case"assert":return}console[i](`[${i}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const p={log(){R("log",arguments)},error(){R("error",arguments)},warn(){R("warn",arguments)},assert(){R("assert",arguments)},trace(){R("trace",arguments)}},_=Q.create({baseURL:j,timeout:8e3});class ge{async getRecipes(){const e=await _.get("api/recipes");e.data.forEach(t=>{t.isFavorite=!1}),a.recipes=e.data}async getIngredients(e){const o=await _.get("api/recipes/"+e+"/ingredients");a.ingredients=o.data}async getSteps(e){const o=await _.get("api/recipes/"+e+"/steps");a.steps=o.data}async createRecipe(e){const o=await _.post("/api/recipes",e);return a.recipes.push(o.data),o.data}async favoriteRecipe(e){await _.post("api/recipes/"+e+"/favorite");let o=a.recipes.find(t=>t.id==e);o.isFavorite=!o.isFavorite}async deleteRecipe(e){await _.delete("api/recipes/"+e),a.recipes=a.recipes.filter(o=>o.id!=e)}}const k=new ge;class me{async deleteStep(e){await _.delete("api/steps/"+e),a.steps=a.steps.filter(o=>o.id!=e)}async createStep(e){const o=await _.post("api/steps",e);a.steps.push(o.data)}}const M=new me;class ve{async deleteIngredient(e){await _.delete("api/ingredients/"+e),a.ingredients=a.ingredients.filter(o=>o.id!=e)}async createIngredient(e){const o=await _.post("api/ingredients",e);a.ingredients.push(o.data)}}const B=new ve;class u{static async confirm(e="Are you sure?",o="You won't be able to revert this!",t="warning",r="Yes, delete it!"){try{return!!(await O.fire({title:e,text:o,icon:t,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(e="Warning!",o="warning",t="top-end",r=3e3,c=!0){O.fire({title:e,icon:o,position:t,timer:r,timerProgressBar:c,toast:!0,showConfirmButton:!1})}static error(e){var o;if(e.isAxiosError){const{response:t}=e;this.toast(((o=t.data.error)==null?void 0:o.message)||t.data.message,"error")}else this.toast(e.message||e,"error")}static success(e="Success!"){this.toast(e,"success")}}const fe={setup(){const i=w({recipeId:a.activeRecipe.id}),e=w({recipeId:a.activeRecipe.id,position:1});return W(async()=>{try{a.account,a.activeRecipe.id&&(await k.getIngredients(a.activeRecipe.id),await k.getSteps(a.activeRecipe.id))}catch(o){p.error(o),u.toast(o.message,"error")}}),{ingredientData:i,stepData:e,recipe:f(()=>a.activeRecipe),ingredients:f(()=>a.ingredients),steps:f(()=>a.steps),account:f(()=>a.account),async deleteRecipe(){try{await u.confirm("Are you sure you want to delete this recipe?")&&(await k.deleteRecipe(this.recipe.id),E.getOrCreateInstance(document.getElementById("active-recipe")).hide(),u.toast("Recipe deleted","success"))}catch(o){p.error(o),u.toast(o.message,"error")}},async deleteStep(o){try{await u.confirm("Are you sure you want to delete this step?")&&(await M.deleteStep(o),u.toast("Step deleted","success"))}catch(t){p.error(t),u.toast(t.message,"error")}},async deleteIngredient(o){try{await u.confirm("Are you sure you want to delete this ingredient?")&&(await B.deleteIngredient(o),u.toast("Step deleted","success"))}catch(t){p.error(t),u.toast(t.message,"error")}},async addIngredient(){try{await B.createIngredient(o.value);const o=w({recipeId:a.activeRecipe.id});u.toast("Ingredient Added!","success")}catch(o){p.error(o),u.toast(o.message,"error")}},async addStep(){try{await M.createStep(e.value),e.value=w({recipeId:a.activeRecipe.id,position:1}),u.toast("Step added!","success")}catch(o){p.error(o),u.toast(o.message,"error")}}}}},he={class:"container-fluid"},be={class:"row"},ye=s("i",{class:"text-danger fs-1 mdi mdi-heart-outline bg-grey rounded"},null,-1),we=[ye],xe={class:"col-lg-8 pt-3 p-3"},Se={class:"d-flex justify-content-between align-items-center"},Re={class:"text-secondary fs-3"},ke={class:"bg-grey rounded-pill p-1 px-3 mx-3"},Ae={class:""},Ce=q(" Delete "),Ie=s("i",{class:"mdi mdi-trash-can"},null,-1),Ee=[Ce,Ie],Te=s("button",{type:"button",class:"btn-close btn btn-light bg-light","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),$e={class:"text-grey fs-4"},Oe={class:"row pt-5"},Pe={class:"col-lg-6"},De={class:"elevation-2 rounded"},qe=s("div",{class:"text-center bg-primary rounded-top"},[s("h3",null,"Recipe Steps")],-1),Le={class:"d-flex justify-content-between align-items-center"},Ne=["onClick"],je={class:"mb-3"},Me=s("div",{class:"text-end m-2"},[s("button",{type:"submit",class:"btn btn-primary"},"Add")],-1),Be={class:"col-lg-6"},Ve={class:"elevation-2 rounded"},Fe=s("div",{class:"text-center bg-primary rounded-top"},[s("h3",null,"Ingredients")],-1),Ue={class:"d-flex justify-content-between"},ze=["onClick"],He={key:0,class:"mb-3"},Ke=s("div",{class:"text-end"},[s("button",{type:"submit",class:"btn btn-primary m-2"},"Add")],-1),Ye={class:"d-flex justify-content-end align-items-end published p-3"};function Qe(i,e,o,t,r,c){return l(),d("div",he,[s("div",be,[s("div",{class:"col-lg-4 modal-col1 text-end",style:P(`background-image: url(${t.recipe.picture})`)},we,4),s("div",xe,[s("div",Se,[s("div",null,[s("span",Re,m(t.recipe.title),1),s("span",ke,m(t.recipe.category),1)]),s("div",Ae,[t.account.id==t.recipe.creatorId?(l(),d("button",{key:0,onClick:e[0]||(e[0]=(...n)=>t.deleteRecipe&&t.deleteRecipe(...n)),type:"button",class:"btn btn-danger mx-3"},Ee)):x("",!0),Te])]),s("span",$e,m(t.recipe.subtitle),1),s("div",Oe,[s("div",Pe,[s("div",De,[qe,s("ol",null,[(l(!0),d(I,null,D(t.steps,n=>(l(),d("li",{key:n.id,class:"py-2"},[s("div",Le,[s("span",null,m(n.body),1),t.account.id==t.recipe.creatorId?(l(),d("i",{key:0,onClick:v=>t.deleteStep(n.id),class:"mdi mdi-trash-can text-danger selectable grow"},null,8,Ne)):x("",!0)])]))),128))])]),t.account.id==t.recipe.creatorId?(l(),d("form",{key:0,onSubmit:e[2]||(e[2]=S((...n)=>t.addStep&&t.addStep(...n),["prevent"]))},[s("div",je,[h(s("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>t.stepData.body=n),type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"Add Step",required:""},null,512),[[y,t.stepData.body]]),Me])],32)):x("",!0)]),s("div",Be,[s("div",Ve,[Fe,s("ul",null,[(l(!0),d(I,null,D(t.ingredients,n=>(l(),d("li",{key:n.id,class:"py-2"},[s("div",Ue,[s("div",null,[s("span",null,m(n.quantity+" of "),1),s("span",null,m(n.name),1)]),s("div",null,[s("i",{onClick:v=>t.deleteIngredient(n.id),class:"mdi mdi-trash-can selectable grow text-danger"},null,8,ze)])])]))),128))])]),t.account.id==t.recipe.creatorId?(l(),d("div",He,[s("form",{onSubmit:e[5]||(e[5]=S((...n)=>t.addIngredient&&t.addIngredient(...n),["prevent"]))},[h(s("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>t.ingredientData.name=n),type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"Ingredient name...",required:""},null,512),[[y,t.ingredientData.name]]),h(s("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>t.ingredientData.quantity=n),type:"text",class:"form-control",id:"exampleFormControlInput1",placeholder:"Qty: 2 tbsp...",required:""},null,512),[[y,t.ingredientData.quantity]]),Ke],32)])):x("",!0)])]),s("div",Ye," published by: "+m(t.recipe.creator.name),1)])])])}var We=b(fe,[["render",Qe]]),Ge=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:We});const Ze="modulepreload",V={},Xe="/",T=function(e,o){return!o||o.length===0?e():Promise.all(o.map(t=>{if(t=`${Xe}${t}`,t in V)return;V[t]=!0;const r=t.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${c}`))return;const n=document.createElement("link");if(n.rel=r?"stylesheet":Ze,r||(n.as="script",n.crossOrigin=""),n.href=t,document.head.appendChild(n),r)return new Promise((v,K)=>{n.addEventListener("load",v),n.addEventListener("error",K)})})).then(()=>e())};function Je(i){switch(i){case"./pages/AboutPage.vue":return T(()=>import("./AboutPage.c2f68d24.js"),["assets/AboutPage.c2f68d24.js","assets/vendor.7c1dd81a.js"]);case"./pages/AccountPage.vue":return T(()=>import("./AccountPage.79be9281.js"),["assets/AccountPage.79be9281.js","assets/AccountPage.1d38451d.css","assets/vendor.7c1dd81a.js"]);case"./pages/HomePage.vue":return T(()=>import("./HomePage.243d0d2d.js"),["assets/HomePage.243d0d2d.js","assets/HomePage.33cb84cb.css","assets/vendor.7c1dd81a.js"]);default:return new Promise(function(e,o){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+i)))})}}function $(i){return()=>Je(`./pages/${i}.vue`)}const et=[{path:"/",name:"Home",component:$("HomePage")},{path:"/about",name:"About",component:$("AboutPage")},{path:"/account",name:"Account",component:$("AccountPage"),beforeEnter:X}],F=G({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:Z(),routes:et});class tt{async getAccount(){try{const e=await _.get("/account");a.account=e.data}catch(e){p.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async getFavorites(){let o=(await _.get("/account/favorites")).data;o.forEach(t=>{let r=a.recipes.find(c=>t.id==c.id);r.isFavorite=!0}),a.favorites=o}}const ot=new tt,st={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class nt{constructor(e=!1,o=j){}on(e,o){var t;return(t=this.socket)==null||t.on(e,o.bind(this)),this}onConnected(e){p.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){p.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var o;(o=this.socket)==null||o.emit(st.authenticate,e)}onError(e){p.error("[SOCKET_ERROR]",e)}enqueue(e,o){p.log("[ENQUEING_ACTION]",{action:e,payload:o}),this.queue.push({action:e,payload:o})}playback(){p.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(o=>{this.emit(o.action,o.payload)})}emit(e,o=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,o);if(!this.connected)return this.enqueue(e,o);this.socket.emit(e,o)}}class it extends nt{constructor(){super();this.on("error",this.onError)}onError(e){u.toast(e.message,"error")}}const U=new it,g=J({domain:ue,clientId:_e,audience:pe,useRefreshTokens:!0,onRedirectCallback:i=>{F.push(i&&i.targetUrl?i.targetUrl:window.location.pathname)}});g.on(g.AUTH_EVENTS.AUTHENTICATED,async function(){_.defaults.headers.authorization=g.bearer,_.interceptors.request.use(rt),a.user=g.user,await ot.getAccount(),U.authenticate(g.bearer)});async function rt(i){if(!g.isAuthenticated)return i;const e=g.identity.exp*1e3,o=e<Date.now(),t=e<Date.now()+1e3*60*60*12;return o?await g.loginWithPopup():t&&(await g.getTokenSilently(),_.defaults.headers.authorization=g.bearer,U.authenticate(g.bearer)),i}const at={setup(){return{user:f(()=>a.user),account:f(()=>a.account),async login(){g.loginWithPopup()},async logout(){g.logout({returnTo:window.location.origin})}}}},z=i=>(te("data-v-ce32ca6a"),i=i(),oe(),i),ct={class:"navbar-text"},lt={key:1,class:"dropdown my-lg-0"},dt={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},ut={key:0},pt=["src"],_t={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},gt=z(()=>s("div",{class:"list-group-item list-group-item-action hoverable"}," Manage Account ",-1)),mt=z(()=>s("i",{class:"mdi mdi-logout"},null,-1)),vt=q(" logout "),ft=[mt,vt];function ht(i,e,o,t,r,c){const n=A("router-link");return l(),d("span",ct,[t.user.isAuthenticated?(l(),d("div",lt,[s("div",dt,[t.account.picture?(l(),d("div",ut,[s("img",{src:t.account.picture,alt:"account photo",height:"40",class:"profile-img"},null,8,pt)])):x("",!0)]),s("div",_t,[C(n,{to:{name:"Account"}},{default:ee(()=>[gt]),_:1}),s("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...v)=>t.logout&&t.logout(...v))},ft)])])):(l(),d("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...v)=>t.login&&t.login(...v))}," Login "))])}var bt=b(at,[["render",ht],["__scopeId","data-v-ce32ca6a"]]),yt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:bt});const wt={},xt={class:"modal fade modal-open",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},St={class:"modal-fade modal-dialog modal-xl",role:"document"},Rt={class:"modal-content border-0"},kt={class:"modal-body p-0"};function At(i,e,o,t,r,c){return l(),d("div",xt,[s("div",St,[s("div",Rt,[s("div",kt,[se(i.$slots,"body")])])])])}var Ct=b(wt,[["render",At]]),It=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ct});const Et={setup(){return{}}},Tt={class:"header-img d-flex justify-content-end"},$t=L('<div data-v-45c8ab68><div class="input-group pt-3" data-v-45c8ab68><input class="form-control border-end-0 border" type="search" value="search" id="example-search-input" data-v-45c8ab68><span class="input-group-append" data-v-45c8ab68><button class="btn btn-outline-secondary bg-white border-start-0 border-bottom-0 border ms-n5" type="button" data-v-45c8ab68><i class="mdi mdi-magnify" data-v-45c8ab68></i></button></span></div></div>',1),Ot={class:"p-3"};function Pt(i,e,o,t,r,c){const n=A("Login");return l(),d("div",Tt,[$t,s("div",Ot,[C(n)])])}var Dt=b(Et,[["render",Pt],["__scopeId","data-v-45c8ab68"]]),qt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Dt});const Lt={props:{recipe:{type:Object,required:!0}},setup(i){return{recipes:f(()=>a.recipes),async triggerModal(){a.activeRecipe=i.recipe,p.log(a.activeRecipe),E.getOrCreateInstance(document.getElementById("active-recipe")).show()},async favoriteRecipe(){try{await k.favoriteRecipe(i.recipe.id),i.recipe.isFavorite?u.toast("Recipe added to favorites","success"):u.toast("Recipe removed from favorites","success")}catch(e){p.error(e),u.toast(e.message,"error")}}}}},Nt={class:"col-md-4"},jt={class:"d-flex justify-content-between"},Mt={class:"bg-grey text-shadow elevation-2 m-2 rounded-pill p-2 card-content"},Bt={class:"bg-grey text-shadow m-2 rounded p-2 elevation-2 grow card-content"},Vt={class:"position-absolute bottom-0 w-100"},Ft={class:"bg-grey text-shadow elevation-2 rounded m-3 p-3 card-content border-5 border-dark"};function Ut(i,e,o,t,r,c){return l(),d("div",Nt,[s("div",{onClick:e[2]||(e[2]=(...n)=>t.triggerModal&&t.triggerModal(...n)),class:"bg-grey elevation-2 m-3 card-bg rounded position-relative grow-card selectable",style:P(`background-image: url(${o.recipe.picture})`)},[s("div",jt,[s("span",Mt,[s("b",null,m(o.recipe.category),1)]),s("span",Bt,[s("b",null,[o.recipe.isFavorite?(l(),d("i",{key:0,onClick:e[0]||(e[0]=S((...n)=>t.favoriteRecipe&&t.favoriteRecipe(...n),["stop"])),class:"mdi mdi-heart text-danger selectable grow"})):(l(),d("i",{key:1,onClick:e[1]||(e[1]=S((...n)=>t.favoriteRecipe&&t.favoriteRecipe(...n),["stop"])),class:"mdi mdi-heart-outline text-danger selectable grow"}))])])]),s("div",Vt,[s("div",Ft,[s("h4",null,m(o.recipe.title),1),s("span",null,m(o.recipe.subtitle),1)])])],4)])}var zt=b(Lt,[["render",Ut]]),Ht=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:zt});const Kt={setup(){const i=w({});return{editable:i,async postRecipe(){try{await k.createRecipe(i.value),E.getOrCreateInstance(document.getElementById("recipe-form")).hide(),i.value="",u.toast("recipe created!","success")}catch(e){p.error(e),u.toast(e.message,"error")}}}}},Yt=s("div",{class:"d-flex justify-content-between bg-primary text-white p-2"},[s("div",{class:""},[s("span",{class:"fs-3 p-3"}," Create Recipe ")]),s("div",null,[s("button",{type:"button",class:"btn-close btn btn-light bg-light m-3","data-bs-dismiss":"modal","aria-label":"Close"})])],-1),Qt={class:"row pt-3 p-3"},Wt={class:"col-6"},Gt={class:"form-floating mb-3"},Zt=s("label",{for:"floatingInput"},"Title",-1),Xt={class:"form-floating mb-3"},Jt=s("label",{for:"floatingInput"},"Subtitle",-1),eo={class:"form-floating"},to=s("label",{for:"floatingTextarea2"},"Brief description of the recipe..",-1),oo={class:"col-6"},so={class:"form-floating"},no=L('<option value="" selected>Please select...</option><option value="Beef">Beef</option><option value="Burgers">Burgers</option><option value="Fish">Fish</option><option value="Pork">Pork</option><option value="Poultry">Poultry</option><option value="Pasta">Pasta</option>',7),io=[no],ro=s("label",{for:"floatingSelect"},"Select Category",-1),ao=s("div",{class:"d-flex justify-content-end p-3"},[s("button",{type:"button",class:"btn btn-light","data-bs-dismiss":"modal","aria-label":"Close"}," Cancel "),s("button",{type:"submit",class:"btn btn-secondary mx-3"},"Submit")],-1);function co(i,e,o,t,r,c){return l(),d(I,null,[Yt,s("form",{onSubmit:e[4]||(e[4]=S((...n)=>t.postRecipe&&t.postRecipe(...n),["prevent"]))},[s("div",Qt,[s("div",Wt,[s("div",Gt,[h(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>t.editable.title=n),type:"text",class:"form-control",id:"floatingInput",placeholder:"Title",required:""},null,512),[[y,t.editable.title]]),Zt]),s("div",Xt,[h(s("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>t.editable.subtitle=n),type:"text",class:"form-control",id:"floatingInput",placeholder:"Subtitle",required:""},null,512),[[y,t.editable.subtitle]]),Jt]),s("div",eo,[h(s("textarea",{"onUpdate:modelValue":e[2]||(e[2]=n=>t.editable.description=n),class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"100px"},maxlength:"75",required:""},null,512),[[y,t.editable.description]]),to])]),s("div",oo,[s("div",so,[h(s("select",{"onUpdate:modelValue":e[3]||(e[3]=n=>t.editable.category=n),class:"form-select",id:"floatingSelect","aria-label":"Floating label select example",required:""},io,512),[[ne,t.editable.category]]),ro])])]),ao],32)],64)}var lo=b(Kt,[["render",co]]),uo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:lo});function po(i){Object.entries({"./components/ActiveRecipe.vue":Ge,"./components/Login.vue":yt,"./components/Modal.vue":It,"./components/Navbar.vue":qt,"./components/Recipe.vue":Ht,"./components/RecipeForm.vue":uo}).forEach(([o,t])=>{const r=t.name||o.substr(o.lastIndexOf("/")+1).replace(/\.\w+$/,"");i.component(r,t.default)})}const H=ie(de);po(H);H.use(F).mount("#app");export{a as A,u as P,b as _,ot as a,p as l,k as r};
